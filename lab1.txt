Perfect üëç
Here is a **clean, complete, correct, and simple step-by-step guide**, starting from **zero**, that **will work**.
I‚Äôll keep the Java code **simple**, but we‚Äôll include a **very basic thread (sleep)** so the container stays alive.

Follow this **exactly in order**.

---

# ‚úÖ COMPLETE STEP-BY-STEP CI/CD SETUP (SIMPLE & WORKING)

---

## STEP 1: Install required tools (Linux)

```bash
sudo apt update
sudo apt install -y git maven docker.io openjdk-21-jdk jenkins
sudo usermod -aG docker $USER
newgrp docker
```

Verify:

```bash
java -version
mvn -version
docker --version
git --version
```

---

## STEP 2: Create project directory

```bash
mkdir java-ci-cd
cd java-ci-cd
mkdir -p src/main/java/com/example
```

---

## STEP 3: Create simple Java program (with thread)

### `src/main/java/com/example/App.java`

```java
package com.example;

public class App {
    public static void main(String[] args) throws Exception {
        System.out.println("Hello from CI/CD pipeline");

        // keep app running (simple thread sleep)
        while (true) {
            Thread.sleep(5000);
        }
    }
}
```

‚úî Simple
‚úî One class
‚úî One thread
‚úî No extra logic

---

## STEP 4: Create `pom.xml`

### `pom.xml`

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="
           http://maven.apache.org/POM/4.0.0
           http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <groupId>com.example</groupId>
  <artifactId>simple-app</artifactId>
  <version>1.0</version>

  <properties>
    <maven.compiler.source>21</maven.compiler.source>
    <maven.compiler.target>21</maven.compiler.target>
  </properties>

  <build>
    <plugins>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.11.0</version>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>3.3.0</version>
        <configuration>
          <archive>
            <manifest>
              <mainClass>com.example.App</mainClass>
            </manifest>
          </archive>
        </configuration>
      </plugin>

    </plugins>
  </build>

</project>
```

---

## STEP 5: Build with Maven

```bash
mvn clean package
```

Verify:

```bash
java -jar target/simple-app-1.0.jar
```

Output:

```
Hello from CI/CD pipeline
```

(Program keeps running ‚Äî press `CTRL + C` to stop)

---

## STEP 6: Create Dockerfile

### `Dockerfile`

```dockerfile
FROM eclipse-temurin:21-jdk
WORKDIR /app
COPY target/simple-app-1.0.jar app.jar
CMD ["java", "-jar", "app.jar"]
```

---

## STEP 7: Build & run Docker image

```bash
docker build -t simpleapp .
docker run simpleapp
```

Output:

```
Hello from CI/CD pipeline
```

(Container keeps running)

---

## STEP 8: Initialize Git & push to GitHub

```bash
# Set your GitHub username
git config --global user.name "YourGitHubUsername"

# Set your GitHub email (must match the email linked to your GitHub account)
git config --global user.email "youremail@example.com"

git init
git add .
git commit -m "Initial CI/CD setup"
git branch -M main
git remote add origin https://github.com/<your-username>/java-ci-cd.git
git push -u origin main
```

---

## STEP 9: Initialize Docker Swarm

```bash
docker swarm init
```
#only if required to re-initialize: docker swarm leave --force
---

## STEP 10: Create Docker Swarm file

### `docker-compose.yml`

```yaml
version: "3.8"

services:
  app:
    image: simpleapp
    deploy:
      replicas: 2
```

---

## STEP 11: Create Jenkinsfile

### `Jenkinsfile`

```groovy
pipeline {
    agent any

    stages {
        stage('Clone') {
            steps {
                git 'https://github.com/<your-username>/java-ci-cd.git'
            }
        }

        stage('Build') {
            steps {
                sh 'mvn clean package'
            }
        }

        stage('Docker Build') {
            steps {
                sh 'docker build -t simpleapp .'
            }
        }

        stage('Deploy') {
            steps {
                sh 'docker stack deploy -c docker-compose.yml simpleapp'
            }
        }
    }
}
```

---

## STEP 12: Configure Jenkins job

1. Open Jenkins ‚Üí `http://localhost:8080`
2. **New Item** ‚Üí Pipeline
3. Pipeline from SCM ‚Üí Git
4. Repo URL ‚Üí your GitHub repo
5. Script path ‚Üí `Jenkinsfile`
6. Save ‚Üí **Build Now**

---

## STEP 13: Verify Swarm deployment

```bash
docker service ls
docker service ps simpleapp_app
docker service logs simpleapp_app
```

---

## FINAL RESULT (WHAT YOU BUILT)

```
GitHub ‚Üí Jenkins ‚Üí Maven ‚Üí Docker ‚Üí Docker Swarm
```

‚úî Simple
‚úî Correct
‚úî Repeatable
‚úî Industry-standard flow

---

## Key things you learned (important)

* Maven folder structure matters
* Executable JAR needs `Main-Class`
* Docker just runs the JAR
* Thread sleep keeps container alive
* Jenkins automates everything

---

You‚Äôre **now done properly** ‚úÖ
If you want next:

* Auto-trigger Jenkins with GitHub webhook
* Remove thread & use health checks
* Turn this into interview explanation

Just say üëç
